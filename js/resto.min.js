(function(c){c.Resto={ajaxReady:!0,offset:0,limit:0,nextPageUrl:null,features:{},init:function(b,e){var a=this;a.issuer=b.issuer||"getCollection";a.language=b.language||"en";a.restoUrl=b.restoUrl||"";a.Util.translation=b.translation||{};a.Header.ssoServices=b.ssoServices||{};a.Header.userProfile=b.userProfile||{};a.data=e;a.Header.init();$(".resto-panel").each(function(){$(this).hasClass("active")?$(this).show():$(this).hide()});$(".resto-panel-trigger").click(function(b){b.preventDefault();a.switchTo($(this))});
$("#resto-searchform").submit(function(b){b.preventDefault();b.stopPropagation();if(!a.ajaxReady)return!1;a.unselectAll();if($(this).attr("changeLocation"))return a.ajaxReady=!1,c.Resto.Util.showMask(),this.submit(),!0;c.History.pushState({randomize:c.Math.random()},null,"?"+$(this).serialize()+(c.Resto.Map.isVisible()?"&box="+c.Resto.Map.getBBOX():""))});$("#search").focus();if("getCollection"===a.issuer){a.data&&a.updateFeaturesList(e,{updateMap:!1,centerMap:e&&e.query,append:!1});a.onHistoryChange(a.updateFeaturesList);
var h=0;$(c).scroll(function(){if(!a.nextPageUrl)return!1;var b=$(this).scrollTop();b>h&&($(c).scrollTop()+$(c).height()>$(document).height()-$(".footer").height()-100&&a.ajaxReady)&&(a.ajaxReady=!1,a.offset+=a.limit,a.Util.showMask(),$.ajax({type:"GET",dataType:"json",url:a.nextPageUrl,async:!0,success:function(b){a.Util.hideMask();a.unselectAll();a.updateFeaturesList(b,{updateMap:!0,centerMap:!1,append:!0});a.ajaxReady=!0},error:function(b){a.Util.hideMask();a.offset-=a.limit;a.ajaxReady=!0;alert("error : "+
b.responseJSON.ErrorMessage)}}));h=b})}a.Util.hideMask()},onHistoryChange:function(b){var e=this;c.History.Adapter.bind(c,"statechange",function(){var a=c.History.getState(),a=e.Util.updateUrlFormat(a.cleanUrl,"json");e.Util.showMask();e.ajaxReady=!1;$.ajax({url:a,async:!0,dataType:"json",success:function(a){e.ajaxReady=!0;e.Util.hideMask();"function"===typeof b&&b(a,{updateMap:!0,centerMap:!0})},error:function(){e.ajaxReady=!0;e.Util.hideMask();e.Util.alert("Connection error")}})})},switchTo:function(b){var e=
$(b.attr("href"));$(".resto-panel").each(function(){$(this).removeClass("active").hide()});$(".resto-panel-trigger").each(function(){$(this).removeClass("active")});b.addClass("active");e.addClass("active").show();"panel-map"===e.attr("id")&&this.Map.init(this.data)},getResolution:function(b){return!$.isNumeric(b)?null:2.5>=b?"THR":2.5<b&&30>=b?"HR":30<b&&500>=b?"MR":"LR"},updateFeaturesList:function(b,e){var a,h,d,f=c.Resto,b=b||{};d=b.properties||{};e=e||{};0<$("#search").length&&$("#search").val(d.query?
f.Util.sanitizeValue(d.query.original.searchTerms):"");$("#resultsummary").html(f.Util.translate("_resultFor",[d.query.original.searchTerms?'<font class="red">'+f.Util.sanitizeValue(d.query.original.searchTerms)+"</font>":""]));if(d.query&&d.query.real){a="";for(h in d.query.real)d.query.real[h]&&"language"!==h&&(a+="<b>"+h+"</b> "+d.query.real[h]+"</br>");a?$(".resto-queryanalyze").html('<div class="resto-query">'+a+"</div>"):$(".resto-queryanalyze").html('<div class="resto-query"><span class="resto-warning">'+
f.Util.translate("_notUnderstood")+"</span></div>")}else d.missing&&$(".resto-queryanalyze").html('<div class="resto-query"><span class="resto-warning">Missing mandatory search filters - '+d.missing.concat()+"</span></div>");f.nextPageUrl=null;if(d.links&&$.isArray(d.links))for(a=d.links.length;a--;)"next"===d.links[a].rel&&(f.nextPageUrl=f.Util.updateUrlFormat(d.links[a].href,"json"));d=$(".resto-features-container");e.append||(d=d.empty(),f.features={});f.updateGetCollectionResultEntries(b,d);e.updateMap&&
c.Resto.Map.updateLayer(b,{centerMap:e.centerMap,append:e.append});$(".resto-ajaxified").each(function(){$(this).click(function(a){a.preventDefault();a.stopPropagation();c.History.pushState({randomize:c.Math.random(),centerMap:!1},null,f.Util.updateUrlFormat($(this).attr("href"),"html"));$("html, body").scrollTop(0);return!1})})},updateGetCollectionResultEntries:function(b,e){var a,c,d,f,g,i,l,k=this,b=b||{};a=0;for(c=b.features.length;a<c;a++){i=[];l=[];g=b.features[a];k.features[g.id]=g;f=g.properties.quicklook||
g.properties.thumbnail||k.restoUrl+"/css/default/img/noimage.png";e.append('<li style="position:relative;padding:0px;"><div id="'+g.id+'" class="resto-feature"><div class="bg-alpha-dark-hover streched"><div class="padded pin-top feature-info-top"></div><div class="padded pin-bottom feature-info-bottom link-light"></div></div></div></li>');f=$("#"+g.id).css({background:"url('"+f+"') no-repeat","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover",
height:"350px","box-sizing":"border-box",padding:"0px",cursor:"pointer"}).click(function(){$(this).hasClass("selected")?k.unselectAll():k.selectFeature($(this).attr("id"),!1)});var j,m;if(g.properties.keywords)for(d=g.properties.keywords.length;d--;)j=g.properties.keywords[d],m=j.id.split(":"),"landuse"===m[0]&&i.push('<a href="'+k.Util.updateUrlFormat(j.href,"html")+'" class="landuse resto-ajaxified resto-keyword'+(m[0]?" resto-keyword-"+m[0].replace(" ",""):"")+'" title="'+k.Util.translate("_thisResourceContainsLanduse",
[Math.round(j.value),j.name])+'"><img src="'+k.restoUrl+"themes/default/img/landuse/"+m[1]+'.png"/></a> ');$(".feature-info-bottom",f).html(i.join(""));l.push('<h3 class="small text-light">'+k.Util.niceDate(g.properties.startDate)+"</h3>");if(g.properties.keywords){var n=m=j=i=-1;for(d=g.properties.keywords.length;d--;)switch(g.properties.keywords[d].id.split(":")[0]){case "state":j=d;break;case "region":"region:_all"!==g.properties.keywords[d].id&&(m=d);break;case "country":n=d;break;case "continent":n=
d}-1!==j?i=j:-1!==m?i=m:-1!==n&&(i=n);if(-1!==i){l.push('<h2 class="small upper"><a href="'+g.properties.keywords[i].href+'" class="resto-ajaxified">'+g.properties.keywords[i].name+"</a></h2>");for(j=g.properties.keywords[i].parentHash;j;){i=null;for(d=g.properties.keywords.length;d--;)if(g.properties.keywords[d].hasOwnProperty("hash")&&g.properties.keywords[d].hash===j){"region:_all"!==g.properties.keywords[d].name&&l.push('<h4 class="small"><a href="'+g.properties.keywords[d].href+'" class="resto-ajaxified text-light">'+
g.properties.keywords[d].name+"</a></h4>");i=g.properties.keywords[d].parentHash;break}j=i}}}$(".feature-info-top",f).html(l.join(""))}},selectFeature:function(b,e){var a=$("#"+b);this.unselectAll();this.switchTo($("#resto-panel-trigger-list"));$(".resto-feature").each(function(){$(this).addClass("darker")});a.addClass("selected").removeClass("darker").children().first().removeClass("bg-alpha-dark-hover");e&&$("html, body").scrollTop(a.offset().top);this.showFeatureInfoDetails(b)},unselectAll:function(){$(".resto-feature").each(function(){$(this).removeClass("selected darker").children().first().addClass("bg-alpha-dark-hover")});
$("#feature-info-details").hide()},showFeatureInfoDetails:function(b){var e=$("#"+b),a,h=this.features[b],d=this;if(!h)return!1;var f=e.offset().left,g=e.offset().top;f+2*e.outerWidth()>$(c).width()?0>f-e.outerWidth()?g+=e.outerHeight():f-=e.outerWidth():f+=e.outerWidth();a=$("#feature-info-details").addClass("lightfield").empty().css({position:"absolute",height:e.outerHeight()+"px",top:g+"px",left:f+"px",width:e.outerWidth()+"px","z-index":"100"}).show();e=[];e.push('<a class="fa fa-3x fa-file-text viewMetadata" href="#" title="'+
d.Util.translate("_viewMetadata")+'"></a>');e.push('<a class="fa fa-3x fa-map-marker showOnMap" href="#" title="'+d.Util.translate("_showOnMap")+'"></a>');e.push('<a class="fa fa-3x fa-cloud-download downloadProduct" href="#" title="'+d.Util.translate("_download")+'"></a>');-1!==d.Header.userProfile.userid&&e.push('<a class="fa fa-3x fa-shopping-cart addToCart" href="#" title="'+d.Util.translate("_addToCart")+'"></a>');a.append('<div class="feature-info-bottom">'+e.join("")+"</div>");$(".viewMetadata",
a).click(function(a){a.preventDefault();a.stopPropagation();c.location=d.restoUrl+"collections/"+h.properties.collection+"/"+h.id+".html?lang="+d.language;return!1});$(".viewOnMap",a).click(function(b){b.preventDefault();b.stopPropagation();d.switchTo($("#resto-panel-trigger-map"));d.Map.hilite(a.attr("id"),!0);return!1});$(".showOnMap",a).click(function(a){a.preventDefault();a.stopPropagation();d.switchTo($("#resto-panel-trigger-map"));d.Map.hilite(b,!0);return!1});$(".addToCart",a).click(function(a){a.preventDefault();
a.stopPropagation();d.Util.showMask();$.ajax({url:d.restoUrl+"users/"+d.Header.userProfile.userid+"/cart",async:!0,type:"POST",dataType:"json",data:JSON.stringify({url:d.restoUrl+"collections/"+h.properties.collection+"/"+h.id+"/download"}),contentType:"application/json",success:function(a,b,e){d.Util.hideMask();200===e.status&&alert("added")},error:function(){d.Util.hideMask();alert("TODO - error")}});return!1});$(".downloadProduct",a).click(function(a){a.preventDefault();a.stopPropagation();alert("TODO");
return!1})},TODO:function(){infos={};if(feature.properties.keywords){var b={location:{title:"_location",keywords:[]},landuse:{title:"_landUse",keywords:[]},tag:{title:"_tags",keywords:[]},resolution:{title:"_resolution",keywords:[]},other:{title:"_other",keywords:[]}},e,a,c,d,f,g;for(e=feature.properties.keywords.length;e--;){a=feature.properties.keywords[e];c=a.name;d=a.id.split(":");g="";if("landuse"===d[0])f="landuse",c=c+" ("+Math.round(a.value)+"%)",g=self.Util.translate("_thisResourceContainsLanduse",
[a.value,i]);else if("country"===d[0]||"continent"===d[0]||"region"===d[0]||"state"===d[0])f="location",g=self.Util.translate("_thisResourceIsLocated",[c]);else if("city"===d[0])f="location",g=self.Util.translate("_thisResourceContainsCity",[c]);else if(0===a.name.indexOf("#"))f="tag";else if("other"===d[0])f="other";else continue;b[f].keywords.push('<a href="'+self.Util.updateUrlFormat(a.href,"html")+'" class="resto-ajaxified resto-keyword'+(d[0]?" resto-keyword-"+d[0].replace(" ",""):"")+'" title="'+
g+'">'+c+"</a> ")}feature.properties.resolution&&(e=self.getResolution(feature.properties.resolution),b.resolution.keywords.push(feature.properties.resolution+'m - <a href="'+self.Util.updateUrl(self.Util.updateUrlFormat(selfUrl,"html"),{q:self.Util.translate(e)})+'" class="resto-ajaxified resto-updatebbox resto-keyword resto-keyword-resolution" title="'+self.Util.translate(e)+'">'+e+"</a>"));for(var i in b)0<b[i].keywords.length&&infos.push('<p><span class="upper">'+self.Util.translate(b[i].title)+
"</span>&nbsp;&nbsp;<span>"+b[i].keywords.join(", ")+"</span></p>");$("#feature-info-details").append('<div class="feature-info-details">'+infos.join("")+"</div>")}}};c.Resto.Header={ssoServices:{},init:function(){var b=this;b.setOAuthServers();$(".shareOnFacebook").click(function(e){e.preventDefault();c.open("https://www.facebook.com/sharer.php?u="+encodeURIComponent(c.History.getState().cleanUrl)+"&t="+encodeURIComponent(b.Util.sanitizeValue($("#search"))));return!1});$(".shareOnTwitter").click(function(e){e.preventDefault();
c.open("http://twitter.com/intent/tweet?status="+encodeURIComponent(b.Util.sanitizeValue($("#search"))+" - "+c.History.getState().cleanUrl));return!1});$(".gravatar").css("background-image","url("+c.Resto.Util.getGravatar(b.userProfile.userhash,200)+")");$(".signIn").click(function(e){e.preventDefault();b.signIn();return!1});$(".register").click(function(e){e.preventDefault();b.signUp();return!1});$(".resto-collection-info-trigger").click(function(b){b.preventDefault();$(".resto-collection-info").is(":visible")?
($(".resto-collection-info").slideUp(),$(this).removeClass("active")):($(".resto-collection-info").slideDown(),$(this).addClass("active"));return!1});$("#userPassword").keypress(function(b){if(13===b.which)return $(".signIn").trigger("click"),!1});$("#userPassword1").keypress(function(b){if(13===b.which)return $(".register").trigger("click"),!1});$(document).on("opened.fndtn.reveal","[data-reveal]",function(){switch($(this).attr("id")){case "displayRegister":$("#userName").focus();break;case "displayLogin":$("#userEmail").focus();
break;case "displayProfile":b.showProfile()}});$(".show-small-menu").click(function(b){b.preventDefault();$("#small-menu").is(":visible")?($("#small-menu").hide(),$(".show-small-menu").removeClass("icon-close"),$(".show-small-menu").addClass("icon-menu")):($("#small-menu").show(),$(".show-small-menu").addClass("icon-close"),$(".show-small-menu").removeClass("icon-menu"));return!1});$(c).resize(function(){$("#small-menu").hide()})},signIn:function(){Resto.Util.showMask();$.ajax({url:Resto.restoUrl+
"api/users/connect",headers:{Authorization:"Basic "+btoa(Resto.Util.sanitizeValue($("#userEmail"))+":"+Resto.Util.sanitizeValue($("#userPassword")))},dataType:"json",success:function(b){b&&-1===b.userid?(Resto.Util.hideMask(),Resto.Util.alert($("#displayLogin"),"Error - unknown user or incorrect password")):c.location.reload()},error:function(){Resto.Util.hideMask();Resto.Util.alert($("#displayLogin"),"Error - cannot sign in")}})},signUp:function(){var b=Resto.Util.sanitizeValue($("#userName")),e=
Resto.Util.sanitizeValue($("#userPassword1")),a=Resto.Util.sanitizeValue($("#r_userEmail")),c=$("#displayRegister");!a||!Resto.Util.isEmailAdress(a)?Resto.Util.alert(c,"Email is not valid"):b?e?(Resto.Util.showMask(),$.ajax({url:Resto.restoUrl+"users",async:!0,type:"POST",dataType:"json",data:{email:a,password:e,username:b,givenname:Resto.Util.sanitizeValue($("#firstName")),lastname:Resto.Util.sanitizeValue($("#lastName"))},success:function(a){Resto.Util.hideMask();a&&"success"===a.status?(Resto.Util.alert(c,
Resto.Util.translate("_emailSent")),c.hide()):Resto.Util.alert(c,a.ErrorMessage)},error:function(a){Resto.Util.hideMask();a.responseJSON?Resto.Util.alert(c,a.responseJSON.ErrorMessage):Resto.Util.alert(c,"Error : cannot register")}})):Resto.Util.alert(c,"Password is mandatory"):Resto.Util.alert(c,"Username is mandatory")},showProfile:function(){var b=$("#displayProfile");b.html('<div class="padded large-12 columns center"><img class="gravatar-big" src="'+c.Resto.Util.getGravatar(this.userProfile.userhash,
200)+'"/><a class="button signOut">'+c.Resto.Util.translate("_logout")+"</a></div>");$(".signOut").click(function(){Resto.Util.showMask();$.ajax({url:c.Resto.restoUrl+"api/users/disconnect",dataType:"json",success:function(){Resto.Util.hideMask();c.location.reload()},error:function(){Resto.Util.hideMask();Resto.Util.alert(b,"Error : cannot disconnect")}});return!1})},setOAuthServers:function(){var b=this,e;for(e in b.ssoServices)(function(a){$(".signWithOauth").append('<span id="_oauth'+a+'">'+b.ssoServices[a].button+
"</span>");$("a","#_oauth"+a).click(function(e){e.preventDefault();var d=c.open(b.ssoServices[a].authorizeUrl),f=setInterval(function(){d.closed&&(clearInterval(f),Resto.Util.showMask(),c.location.reload())},200);return!1})})(e)}}})(window);
(function(c){c.Resto.Util={ajaxReady:!0,offset:0,limit:0,translation:{},sanitizeValue:function(b){return!b||!b.length?"":("string"===$.type(b)?b:b.val()).replace(/<.*?>/g,"")},showMask:function(){$('<div id="resto-mask-overlay"><span class="fa fa-3x fa-refresh fa-spin"></span></div>').appendTo($("body")).css({position:"fixed","z-index":"100000",top:"0px",left:"0px","background-color":"rgba(128, 128, 128, 0.7)",color:"white","text-align":"center",width:"100%",height:"100%","line-height":$(c).height()+
"px"}).show()},hideMask:function(){$("#resto-mask-overlay").remove()},translate:function(b,e){if(!this.translation||!this.translation[b])return b;var a,c,d=this.translation[b];if(e&&-1!==d.indexOf("{a:")){a=0;for(c=e.length;a<c;a++)d=d.replace("{a:"+(a+1)+"}",e[a])}return d},updateUrl:function(b,e){var a,c,d,f,g,i={},l="",k=b.split("?")[0];try{g=b.split("?")[1].split("&")}catch(j){g=[]}d=0;for(f=g.length;d<f;d++)a=g[d].split("=")[0],c=g[d].split("=")[1],a&&(i[a]=c?c:"");for(a in e)i[a]=e[a];for(a in i)l+=
a+"="+i[a]+"&";return k+"?"+l},updateUrlFormat:function(b,e){var a=b.split("?"),c=a[0],a=a[1],d=c.split(".");1<d.length&&(d.pop(),c=d.join("."));return c+"."+e+"?"+a},getGravatar:function(b,c){return"http://www.gravatar.com/avatar/"+(b?b:"")+"?d=mm"+(!c||!$.isNumeric(c)?"":"&s="+c)},message:function(b,c){var a=$("body"),h;a.append('<div class="adminMessage"><div class="content">'+b+"</div></div>");h=$(".adminMessage",a);h.fadeIn("slow").delay(c||2E3).fadeOut("slow",function(){h.remove()}).css({left:(a.width()-
h.width())/2,top:60});return h},isEmailAdress:function(b){return!b||0===b.length?!1:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/.test(b)},alignHeight:function(b){var c=0;b.each(function(){var a=$(this).height()+20;a>c&&(c=a)});b.css("height",c)},niceDate:function(b){if(!b)return"";b=b.split("T")[0].split("-");return this.translate("_niceDate",[b[0],this.translate("_month"+b[1]),b[2]])},alert:function(b,c){alert(c)},infiniteScroll:function(b,e,a,h,d){var f=this,g=0;f.limit=d;a=a||{};if("function"!==
typeof h)return!1;$(c).scroll(function(){var d=$(this).scrollTop();d>g&&($(c).scrollTop()+$(c).height()>$(document).height()-100&&f.ajaxReady)&&(f.ajaxReady=!1,f.offset+=f.limit,a.startIndex=f.offset,f.showMask(),$.ajax({type:"GET",dataType:e,url:b,async:!0,data:a,success:function(a){f.hideMask();h(a);f.ajaxReady=!0},error:function(a){f.hideMask();f.message("error : "+a.responseJSON.ErrorMessage);f.offset-=f.limit;f.ajaxReady=!0}}));g=d});return!1}}})(window);
(function(c){c.Resto.Map={isLoaded:!1,layer:null,init:function(b){var e,a=this;if(a.isLoaded)return!1;if(c.M){a.isLoaded=!0;$("#mapshup").height($(c).height()-$(".resto-search-panel").outerHeight()-$(".resto-search-panel").position().top);c.M.load();$("#resto-container").bind("scroll",function(){clearTimeout(e);e=setTimeout(function(){c.M.events.trigger("resizeend")},150)});var h=setInterval(function(){c.M.Map.map&&c.M.isLoaded&&(c.M.Map.events.register("moveend",a,function(a,b){b.updateBBOX()}),
a.updateBBOX(),clearInterval(h))},500)}if(c.M&&b)var d=setInterval(function(){c.M.Map.map&&c.M.isLoaded&&(a.initLayer(b,!0),"getResource"===c.Resto.issuer&&a.layer&&(c.M.Map.zoomTo(a.layer.getDataExtent(),!1),a.userRights&&a.userRights.visualize&&$.isArray(b.features)&&b.features[0]&&b.features[0].properties.services.browse&&b.features[0].properties.services.browse.layer&&M.Map.addLayer({title:b.features[0].id,type:b.features[0].properties.services.browse.layer.type,layers:b.features[0].properties.services.browse.layer.layers,
url:b.features[0].properties.services.browse.layer.url.replace("%5C","")})),(new c.M.Toolbar({position:"nw",orientation:"h"})).add({title:'<span class="fa fa-map-marker"></span>',tt:"Center",onoff:!1,onactivate:function(b,d){d.activate(!1);a.layer&&(a.layer.features&&0<a.layer.features.length)&&c.M.Map.zoomTo(a.layer.getDataExtent(),!1)}}),clearInterval(d))},500)},addLayer:function(b){if(!this.isLoaded)return null;"string"===typeof b&&(b=JSON.parse(decodeURI(b)));return c.M.Map.addLayer(b,{noDeletionCheck:!0})},
initLayer:function(b,e){if(!this.isLoaded)return!1;this.layer=this.addLayer({type:"GeoJSON",clusterized:!1,data:b,zoomOnNew:e?"always":!1,MID:"__resto__",color:"#FFF1FB",selectable:"getCollection"===c.Resto.issuer?!0:!1,featureInfo:{noMenu:!0,onSelect:function(a){a&&a.fid&&(c.M.Map.featureInfo.unhilite(c.M.Map.featureInfo.hilited),c.Resto.selectFeature(a.fid,!0))},onUnselect:function(){$(".resto-feature").each(function(){$(this).removeClass("selected")})}},ol:{styleMap:new OpenLayers.StyleMap({"default":new OpenLayers.Style(OpenLayers.Util.applyDefaults({fillOpacity:"getCollection"===
c.Resto.issuer?0.2:0.001,strokeColor:"#ffff00",strokeWidth:1,fillColor:"#fff"})),select:{strokeColor:"#ffa500",fillOpacity:"getCollection"===c.Resto.issuer?0.7:0.001}})}})},updateLayer:function(b,e){if(!this.isLoaded)return!1;var a=e.hasOwnProperty("centerMap")?e.centerMap:!1,h=e.hasOwnProperty("append")?e.append:!1;this.layer?(h||this.layer.destroyFeatures(),c.M.Map.layerTypes.GeoJSON.load({data:b,layerDescription:this.layer._M.layerDescription,layer:this.layer,zoomOnNew:a?"always":!1})):this.initLayer(b,
a);this.updateBBOX()},updateBBOX:function(){if(c.M&&c.M.Map.map)if($("#mapshup").is(":visible")){var b=this.getBBOX();$(".resto-updatebbox").each(function(){$(this).attr("href",c.M.Util.extendUrl($(this).attr("href"),{box:b}))})}else $(".resto-updatebbox").each(function(){$(this).attr("href",c.M.Util.extendUrl($(this).attr("href"),{box:null}))})},isVisible:function(){return!this.isLoaded?!1:c.M&&c.M.Map&&c.M.Map.map&&$("#mapshup").is(":visible")?!0:!1},getBBOX:function(){return!this.isLoaded?!1:c.M.Map.Util.p2d(c.M.Map.map.getExtent()).toBBOX()},
hilite:function(b,e){if(!this.isLoaded)return!1;var a=c.M.Map.Util.getFeature(c.M.Map.Util.getLayerByMID("__resto__"),b);a&&(e&&c.M.Map.zoomTo(a.geometry.getBounds(),!1),c.M.Map.featureInfo.hilite(a))}}})(window);
